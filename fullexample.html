

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Full example &mdash; ETL Best Practices with Airflow v1.8</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="ETL Best Practices with Airflow v1.8" href="index.html"/>
        <link rel="prev" title="What makes Airflow great?" href="great.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ETL Best Practices with airflow 1.8
          

          
          </a>

          
            
            
              <div class="version">
                1.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="principles.html">ETL principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="gotchas.html">Gotcha&#8217;s</a></li>
<li class="toctree-l1"><a class="reference internal" href="great.html">What makes Airflow great?</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Full example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-airflow">Install airflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clone-example-project">Clone example project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-postgres">Install postgres</a></li>
<li class="toctree-l2"><a class="reference internal" href="#set-up-database">Set up database</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">ETL Best Practices with airflow 1.8</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Full example</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="full-example">
<h1>Full example<a class="headerlink" href="#full-example" title="Permalink to this headline">¶</a></h1>
<p>To demonstrate how the ETL principles come together with airflow, let&#8217;s walk through a simple, full
example that implements a data flow pipeline adhering to these principles. I&#8217;m mostly assuming that
people running airflow will have Linux (I use Ubuntu), but the examples should work for Mac OSX as
well with a couple of simple changes.</p>
<p>First, let&#8217;s set up a simple postgres database that has a little bit of data, so that the example
can materialize in full and the processing becomes clear.</p>
<div class="section" id="install-airflow">
<h2>Install airflow<a class="headerlink" href="#install-airflow" title="Permalink to this headline">¶</a></h2>
<p>Follow <a class="reference external" href="https://airflow.incubator.apache.org/start.html">these</a> instructions for
the quick start. After you start the webserver, also start the scheduler. Play around with it for while,
follow the tutorial there, then get back to this tutorial to further contextualize your understanding
of this platform.</p>
</div>
<div class="section" id="clone-example-project">
<h2>Clone example project<a class="headerlink" href="#clone-example-project" title="Permalink to this headline">¶</a></h2>
<p>Go to the github project page of this documentation project, where you can download the example
source code, DAGs, SQL and scripts to generate the databases and load it with data:</p>
<p><a class="reference external" href="https://github.com/gtoonstra/etl-with-airflow/">Documentation Github Project</a></p>
<p>Clone this project locally somewhere.</p>
</div>
<div class="section" id="install-postgres">
<h2>Install postgres<a class="headerlink" href="#install-postgres" title="Permalink to this headline">¶</a></h2>
<p>Then first install postgres on your machine. For Ubuntu, this can be installed using apt:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo apt-get install postgresql
$ sudo service postgresql restart
</pre></div>
</div>
<p>For Mac OSX, I highly recommend the <a class="reference external" href="http://postgresapp.com/">package installer</a>. After installation,
it will be running and you can restart it after a reboot using the <em>app</em> in the launcher. You can log in
through the postgresql menu top right.</p>
</div>
<div class="section" id="set-up-database">
<h2>Set up database<a class="headerlink" href="#set-up-database" title="Permalink to this headline">¶</a></h2>
<p>On Linux, go to the <em>do-this-first</em> directory in the examples directory of the cloned github project,
then run the <em>create_everything.sh</em> script. For Mac OSX, you probably have to open the SQL scripts
separately and run them in order.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> examples/do-this-first
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="great.html" class="btn btn-neutral" title="What makes Airflow great?" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Gerard Toonstra.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.8',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>